<h2>All candidates</h2>
<%= link_to 'Add candidate', new_candidate_path %>
<% if @candidates.count > 0 %>
<table>
    <tr>
        <th>First name</th>
        <th>Last name</th>
        <th>E-mail</th>
        <th>Position</th>
        <th>Interviewers</th>
        <th>Skills</th>
    </tr>

    <% @candidates.each do |candidate| %>
        <tr>
            <td><%= candidate.first_name %></td>
            <td><%= candidate.last_name %></td>
            <td><%= candidate.email %></td>
            <td><%= candidate.position.title %></td>
            <td>
                <% if candidate.interview.present? && candidate.interview.managers.present? %>
                <% candidate.interview.managers.each do |manager| %>
                    <%= manager.full_name %><br>
                <% end %>
                <% else %>
                    <%= link_to 'Assign managers', controller: 'interviews', action: 'new', candidate_id: candidate.id %>
                <% end %>
            </td>
            <td>
                <% candidate.skills.each do |skill| %>
                    #<%= skill.name %>&nbsp;
                <% end %>
            </td>
            <td><%= link_to 'Edit', edit_candidate_path(candidate) %></td>
            <td><%= link_to 'Delete', candidate_path(candidate),
            method: :delete,
            data: { confirm: 'Are you sure you want to delete ' + candidate.first_name + ' ' + candidate.last_name + '?' } %></td>
        </tr>
    <% end %>
</table>
<% else %>
<h3>No candidates to list.</h3>
<% end %>